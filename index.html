<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cancer Awareness Gateway | ‡§ï‡•à‡§Ç‡§∏‡§∞ ‡§ú‡§æ‡§ó‡§∞‡•Ç‡§ï‡§§‡§æ ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤</title>

  <!-- PDF.js (for extracting text from PDFs client-side) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.7.107/pdf.min.js"></script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:"Poppins",sans-serif;
      background:#fff6f6; /* single soft color */
      color:#222;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    header{
      background:#b71c1c;
      color:#fff;
      padding:28px 18px;
      text-align:center;
    }
    header h1{margin:0;font-size:1.9rem}
    header p{margin-top:6px;opacity:0.95}

    main{max-width:1100px;margin:24px auto;padding:0 16px;}
    .intro{
      text-align:center;margin-bottom:18px;
      padding:18px;background:#fff;border-radius:10px;
      box-shadow:0 6px 20px rgba(183,28,28,0.06);
    }
    .intro h2{color:#b71c1c;margin-bottom:6px}
    .intro p{margin:0;color:#333}

    .choices{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin-top:14px}
    .choice-btn{
      background:#b71c1c;color:#fff;border:none;padding:10px 18px;border-radius:10px;font-size:1rem;
      cursor:pointer;transition:transform .18s ease,box-shadow .18s ease;
    }
    .choice-btn:hover{transform:translateY(-4px);box-shadow:0 10px 25px rgba(183,28,28,0.15);}

    .panel{
      display:none;
      margin-top:18px;
      background:#fff;padding:18px;border-radius:12px;
      box-shadow:0 8px 30px rgba(0,0,0,0.06)
    }

    /* PDF grid */
    .pdf-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px}
    .pdf-card{
      border-radius:10px;padding:14px;background:#fff6f6;border:1px solid #ffe6e6;
      text-align:left;
    }
    .pdf-card h3{margin:0;color:#b71c1c;font-size:1.02rem}
    .pdf-card p{margin:8px 0 6px;font-size:.92rem;color:#444}
    .pdf-actions{display:flex;gap:8px;flex-wrap:wrap}

    .btn {
      padding:8px 12px;border-radius:8px;border:none;cursor:pointer;font-weight:600;
    }
    .btn-open{background:#ef6c6c;color:#fff}
    .btn-tts{background:#43a047;color:#fff}
    .btn-stop{background:#757575;color:#fff}

    /* viewer */
    .viewer{margin-top:16px;text-align:center}
    iframe.pdf-frame{width:100%;height:520px;border-radius:8px;border:1px solid #eee;margin-top:12px}

    /* Video grid */
    .video-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:16px}
    .video-card{background:#fff;padding:12px;border-radius:10px;border:1px solid #f1f1f1}
    .video-card h4{margin:6px 0;color:#b71c1c;font-size:1rem}
    .video-card iframe{width:100%;height:200px;border-radius:8px;border:none}

    footer{margin:28px 0 0;padding:18px;text-align:center;color:#fff;background:#b71c1c;border-top-left-radius:12px;border-top-right-radius:12px}
    @media(max-width:600px){ iframe.pdf-frame{height:360px} }
  </style>
</head>

<body>
  <header>
    <h1>Cancer Awareness Gateway | ‡§ï‡•à‡§Ç‡§∏‡§∞ ‡§ú‡§æ‡§ó‡§∞‡•Ç‡§ï‡§§‡§æ ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤</h1>
    <p>‡§∏‡§≠‡•Ä ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Æ‡•á‡§Ç ‚Äî PDF ‡§™‡§¢‡§º‡•á‡§Ç / ‡§∏‡•Å‡§®‡•á‡§Ç ‡§î‡§∞ ‡§°‡•â‡§ï‡•ç‡§ü‡§∞‡•Ä ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§¶‡•á‡§ñ‡•á‡§Ç</p>
  </header>

  <main>
    <div class="intro">
      <h2>‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç / Get information</h2>
      <p>‡§®‡•Ä‡§ö‡•á ‡§∏‡•á ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§ö‡•Å‡§®‡•á‡§Ç ‚Äî PDF (‡§™‡•Ç‡§∞‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§™‡§¢‡§º‡•á‡§Ç/‡§∏‡•Å‡§®‡•á‡§Ç) ‡§Ø‡§æ ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§¶‡•á‡§ñ‡•á‡§Ç</p>
      <div class="choices">
        <button class="choice-btn" onclick="openPanel('pdfPanel')">üìÑ ‡§™‡•Ä‡§°‡•Ä‡§è‡§´ (PDF)</button>
        <button class="choice-btn" onclick="openPanel('videoPanel')">üé• ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã (Video)</button>
      </div>
    </div>

    <!-- PDF Panel -->
    <section id="pdfPanel" class="panel" aria-hidden="true">
      <h3 style="color:#b71c1c;margin:0 0 10px">‡§ï‡•à‡§Ç‡§∏‡§∞ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä (PDF + ‡§∏‡•Å‡§®‡•á‡§Ç)</h3>

      <div class="pdf-grid" id="pdfGrid">
        <!-- JS will populate pdf cards -->
      </div>

      <div class="viewer" id="pdfViewer" style="display:none">
        <div style="width:100%;max-width:980px;margin:auto">
          <iframe id="pdfFrame" class="pdf-frame" src=""></iframe>
        </div>

        <div style="margin-top:10px">
          <button id="playTtsBtn" class="btn btn-tts">üîä ‡§∏‡•Å‡§®‡•á‡§Ç (Play)</button>
          <button id="stopTtsBtn" class="btn btn-stop">‚èπÔ∏è ‡§∞‡•ã‡§ï‡•á‡§Ç (Stop)</button>
          <button id="closeViewerBtn" class="btn" style="background:#9e9e9e;color:#fff" onclick="closeViewer()">‚¨Ö ‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç</button>
        </div>

        <p id="pdfStatus" style="margin-top:8px;color:#555"></p>
      </div>
    </section>

    <!-- Video Panel -->
    <section id="videoPanel" class="panel" aria-hidden="true">
      <h3 style="color:#b71c1c;margin:0 0 10px">‡§°‡•â‡§ï‡•ç‡§ü‡§∞/‡§µ‡§ø‡§∂‡•á‡§∑‡§ú‡•ç‡§û ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã (YouTube)</h3>
      <div class="video-grid" id="videoGrid"></div>
    </section>
  </main>

  <footer>¬© 2025 Cancer Awareness Gateway | ‡§ï‡•à‡§Ç‡§∏‡§∞ ‡§ú‡§æ‡§ó‡§∞‡•Ç‡§ï‡§§‡§æ ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤ ‚Äî Designed by Paras Sahu</footer>

  <script>
  /********** Setup: filenames must match exactly the files in your repo root **********/
  const pdfFiles = [
    { key:'breast', title:'‡§∏‡•ç‡§§‡§® ‡§ï‡•à‡§Ç‡§∏‡§∞ (Breast Cancer)', filename:'breast.pdf' },
    { key:'lung', title:'‡§´‡•á‡§´‡§°‡§º‡•ã‡§Ç ‡§ï‡§æ ‡§ï‡•à‡§Ç‡§∏‡§∞ (Lung Cancer)', filename:'lung.pdf' },
    { key:'oral', title:'‡§Æ‡•Å‡§ñ ‡§ï‡•à‡§Ç‡§∏‡§∞ (Oral Cancer)', filename:'oral.pdf' },
    { key:'skin', title:'‡§§‡•ç‡§µ‡§ö‡§æ ‡§ï‡•à‡§Ç‡§∏‡§∞ (Skin Cancer)', filename:'skin.pdf' },
    { key:'cervical', title:'‡§∏‡§∞‡•ç‡§µ‡§æ‡§á‡§ï‡§≤ ‡§ï‡•à‡§Ç‡§∏‡§∞ (Cervical Cancer)', filename:'cervical.pdf' },
    { key:'prostate', title:'‡§™‡•ç‡§∞‡•ã‡§∏‡•ç‡§ü‡•á‡§ü ‡§ï‡•à‡§Ç‡§∏‡§∞ (Prostate Cancer)', filename:'prostate.pdf' },
    { key:'liver', title:'‡§ú‡§ø‡§ó‡§∞ ‡§ï‡•à‡§Ç‡§∏‡§∞ (Liver Cancer)', filename:'liver.pdf' },
    { key:'stomach', title:'‡§™‡•á‡§ü ‡§ï‡§æ ‡§ï‡•à‡§Ç‡§∏‡§∞ (Stomach Cancer)', filename:'stomach.pdf' },
    { key:'kidney', title:'‡§ó‡•Å‡§∞‡•ç‡§¶‡•á ‡§ï‡§æ ‡§ï‡•à‡§Ç‡§∏‡§∞ (Kidney Cancer)', filename:'kidney.pdf' },
    { key:'pancreas', title:'‡§Ö‡§ó‡•ç‡§®‡§æ‡§∂‡§Ø ‡§ï‡•à‡§Ç‡§∏‡§∞ (Pancreatic Cancer)', filename:'pancreatic.pdf' }
  ];

  const videoList = [
    { title:'Awareness Short', embed:'KZIdQIlAYdE' },
    { title:'Lung Cancer ‚Äî Expert Talk', embed:'iKI_SiWy1DM' },
    { title:'Blood Cancer ‚Äî Information', embed:'3WE0ORcRBVI' },
    { title:'Prostate / Men Health', embed:'vOp10DU6m90' },
    { title:'Liver Cancer ‚Äî Awareness', embed:'k3HIsDtvFWE' },
    { title:'Cervical Cancer ‚Äî Info', embed:'vqQ2-yec-bU' },
    { title:'Oral Cancer ‚Äî ENT/Oncology', embed:'cUJHdjUPBh4' },
    { title:'Skin Cancer ‚Äî Derm/Onco', embed:'wMqmKaksbUc' }
  ];

  // Elements
  const pdfGrid = document.getElementById('pdfGrid');
  const videoGrid = document.getElementById('videoGrid');
  const pdfViewer = document.getElementById('pdfViewer');
  const pdfFrame = document.getElementById('pdfFrame');
  const pdfStatus = document.getElementById('pdfStatus');
  const playTtsBtn = document.getElementById('playTtsBtn');
  const stopTtsBtn = document.getElementById('stopTtsBtn');

  // Build PDF cards
  pdfFiles.forEach(f=>{
    const card = document.createElement('div');
    card.className = 'pdf-card';
    card.innerHTML = `
      <h3>${f.title}</h3>
      <p>PDF ‡§ñ‡•ã‡§≤‡§ï‡§∞ ‡§™‡§¢‡§º‡•á‡§Ç ‡§Ø‡§æ ‡§®‡•Ä‡§ö‡•á ‡§ï‡•á ‡§¨‡§ü‡§® ‡§∏‡•á ‡§∏‡•Å‡§®‡•á‡§Ç</p>
      <div class="pdf-actions">
        <a class="btn btn-open" href="${encodeURIComponent(f.filename)}" target="_blank" rel="noopener">üìÑ PDF ‡§ñ‡•ã‡§≤‡•á‡§Ç</a>
        <button class="btn btn-tts" onclick="openAndPrepare('${f.filename}','${escape(f.title)}')">üîä ‡§∏‡•Å‡§®‡•á‡§Ç</button>
      </div>
    `;
    pdfGrid.appendChild(card);
  });

  // Build video cards
  videoList.forEach(v=>{
    const card = document.createElement('div');
    card.className = 'video-card';
    card.innerHTML = `<h4>${v.title}</h4>
      <iframe src="https://www.youtube.com/embed/${v.embed}" title="${v.title}" allowfullscreen></iframe>`;
    videoGrid.appendChild(card);
  });

  // Panel show/hide
  function openPanel(id){
    document.querySelectorAll('.panel').forEach(p=>{ p.style.display='none'; p.setAttribute('aria-hidden','true'); });
    const el = document.getElementById(id);
    if(el){ el.style.display='block'; el.setAttribute('aria-hidden','false'); window.scrollTo({top:0,behavior:'smooth'}); }
  }

  // PDF.js worker
  pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.7.107/pdf.worker.min.js';

  let currentPdfText = '';
  let utterance = null;

  // Called when user clicks "üîä ‡§∏‡•Å‡§®‡•á‡§Ç" on a PDF card.
  async function openAndPrepare(filename, escapedTitle){
    // decode title
    const title = unescape(escapedTitle);
    // file URL (files are in repo root; do NOT prefix with 'pdf/')
    const url = encodeURIComponent(filename);

    // show viewer and set iframe src to open file (so user can also visually read)
    pdfFrame.src = url;
    pdfViewer.style.display = 'block';
    pdfStatus.textContent = 'PDF ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à ‚Äî ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§®‡§ø‡§ï‡§æ‡§≤‡§®‡•á ‡§ï‡•Ä ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡•Ä ‡§ú‡§æ ‡§∞‡§π‡•Ä ‡§π‡•à...';
    currentPdfText = '';

    // attempt to extract full text via PDF.js
    try {
      const fullText = await extractTextFromPDF(url);
      currentPdfText = fullText && fullText.trim().length? fullText : (title + ' ‚Äî PDF ‡§∏‡•á ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§');
      pdfStatus.textContent = 'PDF ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•à ‚Äî "üîä ‡§∏‡•Å‡§®‡•á‡§Ç" ‡§¶‡§¨‡§æ‡§è‡§Å‡•§';
    } catch(err){
      console.error('PDF extract error', err);
      // fallback message
      currentPdfText = `${title} ‚Äî PDF ‡§∏‡•á ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§®‡§ø‡§ï‡§æ‡§≤‡§®‡§æ ‡§Ö‡§∏‡§´‡§≤ ‡§∞‡§π‡§æ‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ PDF ‡§ñ‡•ã‡§≤‡§ï‡§∞ ‡§™‡§¢‡§º‡•á‡§Ç‡•§`;
      pdfStatus.textContent = 'PDF ‡§∏‡•á ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§®‡§ø‡§ï‡§æ‡§≤‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø ‡§π‡•Å‡§à ‚Äî fallback ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§π‡•à‡•§';
    }

    // enable play button
    playTtsBtn.disabled = false;
  }

  // extract text helper
  async function extractTextFromPDF(url){
    // pdfjs accepts URL ‚Äî using encoded filename (root)
    const loadingTask = pdfjsLib.getDocument(url);
    const pdf = await loadingTask.promise;
    let text = '';
    for(let i=1;i<=pdf.numPages;i++){
      const page = await pdf.getPage(i);
      const content = await page.getTextContent();
      text += content.items.map(it=>it.str).join(' ') + '\n\n';
    }
    return text;
  }

  // speak and stop functions
  function speakText(text){
    if(!text) return;
    // stop any current speech
    if(window.speechSynthesis && window.speechSynthesis.speaking) window.speechSynthesis.cancel();
    utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = 'hi-IN';
    utterance.rate = 0.95;
    utterance.pitch = 1.0;
    window.speechSynthesis.speak(utterance);
    pdfStatus.textContent = 'üîä ‡§™‡§¢‡§º ‡§∞‡§π‡§æ ‡§π‡•à... ‡§Ü‡§™ "‚èπÔ∏è ‡§∞‡•ã‡§ï‡•á‡§Ç" ‡§¶‡§¨‡§æ‡§ï‡§∞ ‡§∞‡•ã‡§ï ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§';
  }
  function stopSpeech(){ if(window.speechSynthesis && window.speechSynthesis.speaking) window.speechSynthesis.cancel(); pdfStatus.textContent = ''; }

  playTtsBtn.addEventListener('click', ()=> { if(currentPdfText) speakText(currentPdfText); });
  stopTtsBtn.addEventListener('click', ()=> stopSpeech());

  function closeViewer(){
    stopSpeech();
    pdfFrame.src = '';
    pdfViewer.style.display = 'none';
    pdfStatus.textContent = '';
    currentPdfText = '';
    playTtsBtn.disabled = true;
  }

  // accessibility: stop speech on unload
  window.addEventListener('beforeunload', ()=> { if(window.speechSynthesis) window.speechSynthesis.cancel(); });

  // default: disable play until text ready
  playTtsBtn.disabled = true;

  </script>
</body>
</html>
